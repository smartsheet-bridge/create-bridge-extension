"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[671],{5318:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return c}});var r=n(7378);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),d=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=d(e.components);return r.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=d(n),c=a,h=m["".concat(s,".").concat(c)]||m[c]||p[c]||o;return n?r.createElement(h,i(i({ref:t},u),{},{components:n})):r.createElement(h,i({ref:t},u))}));function c(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var d=2;d<o;d++)i[d]=n[d];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},517:function(e,t,n){var r=n(7378);t.Z=function(e){var t=e.children,n=e.hidden,a=e.className;return r.createElement("div",{role:"tabpanel",hidden:n,className:a},t)}},6359:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(7378),a=n(4309),o=n(8944),i="tabItem_c0e5",l="tabItemActive_28AG";var s=37,d=39;var u=function(e){var t=e.lazy,n=e.block,u=e.defaultValue,p=e.values,m=e.groupId,c=e.className,h=(0,a.Z)(),g=h.tabGroupChoices,f=h.setTabGroupChoices,y=(0,r.useState)(u),k=y[0],w=y[1],v=r.Children.toArray(e.children),b=[];if(null!=m){var x=g[m];null!=x&&x!==k&&p.some((function(e){return e.value===x}))&&w(x)}var N=function(e){var t=e.currentTarget,n=b.indexOf(t),r=p[n].value;w(r),null!=m&&(f(m,r),setTimeout((function(){var e,n,r,a,o,i,s,d;(e=t.getBoundingClientRect(),n=e.top,r=e.left,a=e.bottom,o=e.right,i=window,s=i.innerHeight,d=i.innerWidth,n>=0&&o<=d&&a<=s&&r>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(l),setTimeout((function(){return t.classList.remove(l)}),2e3))}),150))},j=function(e){var t,n;switch(e.keyCode){case d:var r=b.indexOf(e.target)+1;n=b[r]||b[0];break;case s:var a=b.indexOf(e.target)-1;n=b[a]||b[b.length-1]}null==(t=n)||t.focus()};return r.createElement("div",{className:"tabs-container"},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":n},c)},p.map((function(e){var t=e.value,n=e.label;return r.createElement("li",{role:"tab",tabIndex:k===t?0:-1,"aria-selected":k===t,className:(0,o.Z)("tabs__item",i,{"tabs__item--active":k===t}),key:t,ref:function(e){return b.push(e)},onKeyDown:j,onFocus:N,onClick:N},n)}))),t?(0,r.cloneElement)(v.filter((function(e){return e.props.value===k}))[0],{className:"margin-vert--md"}):r.createElement("div",{className:"margin-vert--md"},v.map((function(e,t){return(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==k})}))))}},4956:function(e,t,n){var r=(0,n(7378).createContext)(void 0);t.Z=r},4309:function(e,t,n){var r=n(7378),a=n(4956);t.Z=function(){var e=(0,r.useContext)(a.Z);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},9757:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},metadata:function(){return d},toc:function(){return u},default:function(){return m}});var r=n(5773),a=n(808),o=(n(7378),n(5318)),i=n(6359),l=n(517),s={id:"add_module",title:"Add Module"},d={unversionedId:"recipes/add_module",id:"recipes/add_module",isDocsHomePage:!1,title:"Add Module",description:"An extension is useless by itself, and one of the most commonly used functionality of an extension is a module. In this recipe you'll learn how to add a new module to your helloworld starter application.",source:"@site/docs/recipes/add_module.mdx",sourceDirName:"recipes",slug:"/recipes/add_module",permalink:"/create-bridge-extension/recipes/add_module",version:"current",frontMatter:{id:"add_module",title:"Add Module"},sidebar:"docs",previous:{title:"Functions",permalink:"/create-bridge-extension/concepts/function"},next:{title:"Use Settings",permalink:"/create-bridge-extension/recipes/use_settings"}},u=[{value:"Basic Module",id:"basic-module",children:[]},{value:"Adding User Inputs",id:"adding-user-inputs",children:[]}],p={toc:u};function m(e){var t=e.components,n=(0,a.Z)(e,["components"]);return(0,o.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"An extension is useless by itself, and one of the most commonly used functionality of an extension is a module. In this recipe you'll learn how to add a new module to your ",(0,o.kt)("inlineCode",{parentName:"p"},"helloworld")," starter application."),(0,o.kt)("p",null,"Adding a module is a three part process: writing your module, registering your module, and defining your module. However, in this recipe we will take an iterative approach to help you understand how it's all connected."),(0,o.kt)("h3",{id:"basic-module"},"Basic Module"),(0,o.kt)(i.Z,{groupId:"js2ts",defaultValue:"js",values:[{label:"JavaScript",value:"js"},{label:"TypeScript",value:"ts"}],mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"js",mdxType:"TabItem"},(0,o.kt)("p",null,"Assuming you have followed the ",(0,o.kt)("a",{parentName:"p",href:"/getting_started/quick_start"},"quick start")," guide and have a project directory set up similar to below."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"example\n\u251c\u2500\u2500 src\n\u2502   \u2514\u2500\u2500 index.js\n\u251c\u2500\u2500 package.json\n\u2514\u2500\u2500 extension.json\n")),(0,o.kt)("p",null,"Add a new file to your ",(0,o.kt)("inlineCode",{parentName:"p"},"src")," folder and call it ",(0,o.kt)("inlineCode",{parentName:"p"},"myModule.js"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"example\n\u251c\u2500\u2500 src\n\u2502   \u251c\u2500\u2500 myModule.js\n\u2502   \u2514\u2500\u2500 index.js\n\u251c\u2500\u2500 package.json\n\u2514\u2500\u2500 extension.json\n")),(0,o.kt)("p",null,"Populate it with the following:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="/src/myModule.js"',title:'"/src/myModule.js"'},"export const myModule = () => {\n  return { result: 'Hello, World!' };\n};\n"))),(0,o.kt)(l.Z,{value:"ts",mdxType:"TabItem"},(0,o.kt)("p",null,"Assuming you have followed the ",(0,o.kt)("a",{parentName:"p",href:"/getting_started/quick_start"},"quick start")," guide and have a project directory set up similar to below."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"example\n\u251c\u2500\u2500 src\n\u2502   \u2514\u2500\u2500 index.ts\n\u251c\u2500\u2500 package.json\n\u2514\u2500\u2500 extension.json\n")),(0,o.kt)("p",null,"Add a new file to your ",(0,o.kt)("inlineCode",{parentName:"p"},"src")," folder and call it ",(0,o.kt)("inlineCode",{parentName:"p"},"myModule.ts"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"example\n\u251c\u2500\u2500 src\n\u2502   \u251c\u2500\u2500 myModule.ts\n\u2502   \u2514\u2500\u2500 index.ts\n\u251c\u2500\u2500 package.json\n\u2514\u2500\u2500 extension.json\n")),(0,o.kt)("p",null,"Populate it with the following:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="/src/myModule.ts"',title:'"/src/myModule.ts"'},"import type { ModuleFunction } from '@smartsheet-bridge/extension-handler';\n\nexport const myModule: ModuleFunction = () => {\n  return { result: 'Hello, World!' };\n};\n")))),(0,o.kt)("p",null,"This module will simply return an object with a ",(0,o.kt)("inlineCode",{parentName:"p"},"result")," property assigned to a string that says ",(0,o.kt)("inlineCode",{parentName:"p"},"Hello, World!"),". This property will be accessible during a ",(0,o.kt)("a",{parentName:"p",href:"https://www.smartsheet.com/platform/bridge"},"Bridge by Smartsheet")," workflow run."),(0,o.kt)(i.Z,{groupId:"js2ts",defaultValue:"js",values:[{label:"JavaScript",value:"js"},{label:"TypeScript",value:"ts"}],mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"js",mdxType:"TabItem"},(0,o.kt)("p",null,"Next, import and register the module in the extension ",(0,o.kt)("a",{parentName:"p",href:"/concepts/entry"},"Entry Point")," (",(0,o.kt)("inlineCode",{parentName:"p"},"index.js"),")."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="/src/index.js"',title:'"/src/index.js"'},"import { createBridgeHandler } from '@smartsheet-bridge/extension-handler';\n//highlight-next-line\nimport { myModule } from './myModule';\n\nexport const main = createBridgeHandler({\n  //highlight-start\n  modules: {\n    myModule,\n  },\n  //highlight-end\n});\n"))),(0,o.kt)(l.Z,{value:"ts",mdxType:"TabItem"},(0,o.kt)("p",null,"Next, import and register the module in the extension ",(0,o.kt)("a",{parentName:"p",href:"/concepts/entry"},"Entry Point")," (",(0,o.kt)("inlineCode",{parentName:"p"},"index.ts"),")."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="/src/index.ts"',title:'"/src/index.ts"'},"import { createBridgeHandler } from '@smartsheet-bridge/extension-handler';\n//highlight-next-line\nimport { myModule } from './myModule';\n\nexport const main = createBridgeHandler({\n  //highlight-start\n  modules: {\n    myModule,\n  },\n  //highlight-end\n});\n")))),(0,o.kt)("p",null,"This registers the module, ",(0,o.kt)("inlineCode",{parentName:"p"},"myModule"),", with the extension handler enabling it to run the ",(0,o.kt)("inlineCode",{parentName:"p"},"myModule")," function when told to do so by a ",(0,o.kt)("a",{parentName:"p",href:"https://www.smartsheet.com/platform/bridge"},"Bridge by Smartsheet")," workflow run."),(0,o.kt)("p",null,"The last piece of the puzzle tells the ",(0,o.kt)("a",{parentName:"p",href:"https://www.smartsheet.com/platform/bridge"},"Bridge by Smartsheet")," User Interface that the module exists allowing it to be added to a workflow un in the first place. To do this we need to amend the ",(0,o.kt)("a",{parentName:"p",href:"/concepts/spec"},"Spec File")," (",(0,o.kt)("inlineCode",{parentName:"p"},"extension.json"),")."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="/extension.json"',title:'"/extension.json"'},'{\n  "name": "helloworld",\n  "displayName": "Hello World",\n  //highlight-next-line\n  "module": []\n}\n')),(0,o.kt)("p",null,"The highlighted line above shows the ",(0,o.kt)("inlineCode",{parentName:"p"},"module")," property; this is an array of module definitions that describe each module in the ",(0,o.kt)("inlineCode",{parentName:"p"},"modules")," configuration in the ",(0,o.kt)("a",{parentName:"p",href:"/concepts/entry"},"Entry Point")," above. We can amend it to add our new module."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="/extension.json"',title:'"/extension.json"'},'{\n  "name": "helloworld",\n  "displayName": "Hello World",\n  "module": [\n    //highlight-start\n    {\n      "id": "myModule",\n      "name": "My Module",\n      "hasReturn": true,\n      "param": []\n    }\n    //highlight-end\n  ]\n}\n')),(0,o.kt)("p",null,"Adding the above tells the ",(0,o.kt)("a",{parentName:"p",href:"https://www.smartsheet.com/platform/bridge"},"Bridge by Smartsheet")," UI that a module is available for use with the id ",(0,o.kt)("inlineCode",{parentName:"p"},"myModule")," and it is expected to return an object."),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"It is important to note the identical ",(0,o.kt)("inlineCode",{parentName:"p"},"id")," in the module definition and the module name in the in the handler configuration. If either of these are missing your module will never run."),(0,o.kt)("pre",{parentName:"div"},(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  //highlight-next-line\n  "id": "myModule",\n  "name": "My Module",\n  "hasReturn": true,\n  "param": []\n}\n')),(0,o.kt)("pre",{parentName:"div"},(0,o.kt)("code",{parentName:"pre",className:"language-js"},"export const main = createBridgeHandler({\n  modules: {\n    //highlight-next-line\n    myModule,\n  },\n});\n")))),(0,o.kt)("p",null,"Deploying your extension will allow you to see your new module in the ",(0,o.kt)("a",{parentName:"p",href:"https://www.smartsheet.com/platform/bridge"},"Bridge by Smartsheet")," workflow designer. Adding it to a workflow, saving, and running it will provide a result in the Run Log with the phrase ",(0,o.kt)("inlineCode",{parentName:"p"},"Hello, World!")),(0,o.kt)("h3",{id:"adding-user-inputs"},"Adding User Inputs"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Let's add some customization by adding some inputs")),(0,o.kt)("p",null,"Going back to our module code we can replace it with the following code; allowing us to access the user provided inputs, in this case ",(0,o.kt)("inlineCode",{parentName:"p"},"username"),". We can then use this input to return a more personalized output."),(0,o.kt)(i.Z,{groupId:"js2ts",defaultValue:"js",values:[{label:"JavaScript",value:"js"},{label:"TypeScript",value:"ts"}],mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"js",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="/src/myModule.js"',title:'"/src/myModule.js"'},"//highlight-next-line\nexport const myModule = inputs => {\n  //highlight-next-line\n  return { result: `Hello, ${inputs.username}!` };\n};\n"))),(0,o.kt)(l.Z,{value:"ts",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="/src/myModule.ts"',title:'"/src/myModule.ts"'},"import type { ModuleFunction } from '@smartsheet-bridge/extension-handler';\n\n//highlight-next-line\ntype MyModuleInputs = { username: string };\n\n//highlight-next-line\nexport const myModule: ModuleFunction<MyModuleInputs> = inputs => {\n  //highlight-next-line\n  return { result: `Hello, ${inputs.username}!` };\n};\n")))),(0,o.kt)("p",null,"Of course, if the workflow designer cannot access this input field then this would be blank so in order for it to appear in the ",(0,o.kt)("a",{parentName:"p",href:"https://www.smartsheet.com/platform/bridge"},"Bridge by Smartsheet")," UI we have to define it in our ",(0,o.kt)("a",{parentName:"p",href:"/concepts/spec"},"Spec File")," (",(0,o.kt)("inlineCode",{parentName:"p"},"extension.json"),")."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="/extension.json"',title:'"/extension.json"'},'{\n  "name": "helloworld",\n  "displayName": "Hello World",\n  "module": [\n    {\n      "id": "myModule",\n      "name": "My Module",\n      "hasReturn": true,\n      "param": [\n        //highlight-start\n        {\n          "param": "username",\n          "displayName": "Username",\n          "type": "STRING"\n        }\n        //highlight-end\n      ]\n    }\n  ]\n}\n')),(0,o.kt)("p",null,"Deploying your extension now will allow you to see your new input in your module in the ",(0,o.kt)("a",{parentName:"p",href:"https://www.smartsheet.com/platform/bridge"},"Bridge by Smartsheet"),' workflow designer. Adding "Jane Doe" in the text box, saving, and running your workflow will provide a result in the Run Log with the phrase ',(0,o.kt)("inlineCode",{parentName:"p"},"Hello, Jane Doe!")))}m.isMDXComponent=!0},8944:function(e,t,n){function r(e){var t,n,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(a&&(a+=" "),a+=n);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function a(){for(var e,t,n=0,a="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(a&&(a+=" "),a+=t);return a}n.d(t,{Z:function(){return a}})}}]);