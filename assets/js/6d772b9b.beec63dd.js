"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[353],{5318:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return m}});var a=t(7378);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=a.createContext({}),c=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=c(e.components);return a.createElement(s.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=c(t),m=i,f=d["".concat(s,".").concat(m)]||d[m]||u[m]||r;return t?a.createElement(f,o(o({ref:n},p),{},{components:t})):a.createElement(f,o({ref:n},p))}));function m(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var r=t.length,o=new Array(r);o[0]=d;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var c=2;c<r;c++)o[c]=t[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},517:function(e,n,t){var a=t(7378);n.Z=function(e){var n=e.children,t=e.hidden,i=e.className;return a.createElement("div",{role:"tabpanel",hidden:t,className:i},n)}},6359:function(e,n,t){t.d(n,{Z:function(){return p}});var a=t(7378),i=t(4309),r=t(8944),o="tabItem_c0e5",l="tabItemActive_28AG";var s=37,c=39;var p=function(e){var n=e.lazy,t=e.block,p=e.defaultValue,u=e.values,d=e.groupId,m=e.className,f=(0,i.Z)(),h=f.tabGroupChoices,v=f.setTabGroupChoices,k=(0,a.useState)(p),b=k[0],g=k[1],N=a.Children.toArray(e.children),y=[];if(null!=d){var w=h[d];null!=w&&w!==b&&u.some((function(e){return e.value===w}))&&g(w)}var x=function(e){var n=e.currentTarget,t=y.indexOf(n),a=u[t].value;g(a),null!=d&&(v(d,a),setTimeout((function(){var e,t,a,i,r,o,s,c;(e=n.getBoundingClientRect(),t=e.top,a=e.left,i=e.bottom,r=e.right,o=window,s=o.innerHeight,c=o.innerWidth,t>=0&&r<=c&&i<=s&&a>=0)||(n.scrollIntoView({block:"center",behavior:"smooth"}),n.classList.add(l),setTimeout((function(){return n.classList.remove(l)}),2e3))}),150))},C=function(e){var n,t;switch(e.keyCode){case c:var a=y.indexOf(e.target)+1;t=y[a]||y[0];break;case s:var i=y.indexOf(e.target)-1;t=y[i]||y[y.length-1]}null==(n=t)||n.focus()};return a.createElement("div",{className:"tabs-container"},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":t},m)},u.map((function(e){var n=e.value,t=e.label;return a.createElement("li",{role:"tab",tabIndex:b===n?0:-1,"aria-selected":b===n,className:(0,r.Z)("tabs__item",o,{"tabs__item--active":b===n}),key:n,ref:function(e){return y.push(e)},onKeyDown:C,onFocus:x,onClick:x},t)}))),n?(0,a.cloneElement)(N.filter((function(e){return e.props.value===b}))[0],{className:"margin-vert--md"}):a.createElement("div",{className:"margin-vert--md"},N.map((function(e,n){return(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==b})}))))}},4956:function(e,n,t){var a=(0,t(7378).createContext)(void 0);n.Z=a},4309:function(e,n,t){var a=t(7378),i=t(4956);n.Z=function(){var e=(0,a.useContext)(i.Z);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},151:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return s},metadata:function(){return c},toc:function(){return p},default:function(){return d}});var a=t(5773),i=t(808),r=(t(7378),t(5318)),o=t(6359),l=t(517),s={id:"callback",title:"Callback"},c={unversionedId:"concepts/callback",id:"concepts/callback",isDocsHomePage:!1,title:"Callback",description:'A "callback" is the same as a "function" but cannot be called by users of an external system. These functions are called by the extension platform itself, or platform dependents of the extension platform, at specific times and expect specific responses.',source:"@site/docs/concepts/callback.mdx",sourceDirName:"concepts",slug:"/concepts/callback",permalink:"/create-bridge-extension/concepts/callback",version:"current",frontMatter:{id:"callback",title:"Callback"}},p=[{value:"Install/Uninstall",id:"installuninstall",children:[{value:"<code>onInstall</code>",id:"oninstall",children:[]},{value:"<code>onUninstall</code>",id:"onuninstall",children:[]}]},{value:"Authorization Flow",id:"authorization-flow",children:[]},{value:"Messaging Flow",id:"messaging-flow",children:[]}],u={toc:p};function d(e){var n=e.components,t=(0,i.Z)(e,["components"]);return(0,r.kt)("wrapper",(0,a.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,'A "callback" is the same as a "function" but cannot be called by users of an external system. These functions are called by the extension platform itself, or platform dependents of the extension platform, at specific times and expect specific responses.'),(0,r.kt)("h2",{id:"installuninstall"},"Install/Uninstall"),(0,r.kt)("h3",{id:"oninstall"},(0,r.kt)("inlineCode",{parentName:"h3"},"onInstall")),(0,r.kt)("p",null,"When an extension is ",(0,r.kt)("a",{parentName:"p",href:"/concepts/lifecycle#installation"},(0,r.kt)("em",{parentName:"a"},"installed"))," by a user of an external system the platform will trigger the ",(0,r.kt)("inlineCode",{parentName:"p"},"onInstall")," callback if one exists. This is particularly useful if you wish to gather inputs from the user that are required to integrate with another service."),(0,r.kt)(o.Z,{groupId:"js2ts",defaultValue:"js",values:[{label:"JavaScript",value:"js"},{label:"TypeScript",value:"ts"}],mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"js",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const onInstall = inputs => {\n  // Do work\n  return inputs;\n};\nexport const main = handler({\n  callbacks: { onInstall },\n});\n"))),(0,r.kt)(l.Z,{value:"ts",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"interface MyInstallInputs {\n  clientid: string;\n  apikey: string;\n}\n\nconst onInstall: ExtensionFunction<MyInstallInputs> = inputs => {\n  // Do work\n  return inputs;\n};\n\nexport const main = handler({\n  callbacks: { onInstall },\n});\n")))),(0,r.kt)("p",null,"Whatever is returned from the ",(0,r.kt)("inlineCode",{parentName:"p"},"onInstall")," function is saved with the particular instance of the extension and can be accessed in any function via ",(0,r.kt)("a",{parentName:"p",href:"/concepts/function#context"},(0,r.kt)("inlineCode",{parentName:"a"},"context.settings")),"."),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},'Because a "callback" is the same as a "function" the second parameter of an ',(0,r.kt)("inlineCode",{parentName:"p"},"onInstall")," callback includes the previously saved ",(0,r.kt)("inlineCode",{parentName:"p"},"settings")," object. On the first install these will be blank but if someone reinstalls their instance of the plugin then this information can be incredibly useful for comparison or cleaning up resources on an integrated app."))),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"If an ",(0,r.kt)("inlineCode",{parentName:"p"},"onInstall")," callback is not defined then the default function looks like ",(0,r.kt)("inlineCode",{parentName:"p"},"inputs => inputs")," meaning that whatever the user saves at install time will become the instance's ",(0,r.kt)("inlineCode",{parentName:"p"},"settings"),". Of course, the opposite is also true, if you define an ",(0,r.kt)("inlineCode",{parentName:"p"},"onInstall")," function and still want the ",(0,r.kt)("inlineCode",{parentName:"p"},"inputs")," to be included in the ",(0,r.kt)("inlineCode",{parentName:"p"},"settings")," then you must explicitly return the ",(0,r.kt)("inlineCode",{parentName:"p"},"inputs"),"."),(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const onInstall = inputs => {\n  // Do work\n  return inputs;\n};\n")),(0,r.kt)("p",{parentName:"div"},"If you want to save the ",(0,r.kt)("inlineCode",{parentName:"p"},"inputs")," as well as some other calculated data then you can return both so long as one doesn't overwrite the other."),(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const onInstall = inputs => {\n  const installDate = new Date();\n  return { ...inputs, installDate };\n};\n")))),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Returned data from ",(0,r.kt)("inlineCode",{parentName:"p"},"onInstall")," doesn't automatically render in the UI of an external system. In order for the UI to render the extra data returned they must be declared in the ",(0,r.kt)("a",{parentName:"p",href:"/concepts/spec"},"Spec")," file."))),(0,r.kt)("h3",{id:"onuninstall"},(0,r.kt)("inlineCode",{parentName:"h3"},"onUninstall")),(0,r.kt)("p",null,"Likewise, when an extension is ",(0,r.kt)("a",{parentName:"p",href:"/concepts/lifecycle#uninstalling"},(0,r.kt)("em",{parentName:"a"},"uninstalled"))," by a user of an external system the platform will trigger the ",(0,r.kt)("inlineCode",{parentName:"p"},"onUninstall")," callback if one exists. There are no inputs given and no data is expected to be returned."),(0,r.kt)(o.Z,{groupId:"js2ts",defaultValue:"js",values:[{label:"JavaScript",value:"js"},{label:"TypeScript",value:"ts"}],mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"js",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const onUninstall = () => {\n  // Do work\n}`;\n\nexport const main = handler({\n  callbacks: { onUninstall },\n});\n"))),(0,r.kt)(l.Z,{value:"ts",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"const onUninstall: ExtensionFunction = () => {\n  // Do work\n}`;\n\nexport const main = handler({\n  callbacks: { onUninstall },\n});\n")))),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},'Because a "callback" is the same as a "function" the second parameter of an ',(0,r.kt)("inlineCode",{parentName:"p"},"onUninstall")," callback includes the currently saved ",(0,r.kt)("inlineCode",{parentName:"p"},"settings")," object prior to uninstalling. This information is incredibly useful for cleaning up resources on an integrated app. See ",(0,r.kt)("a",{parentName:"p",href:"/advanced/best_practices#external-integrations"},"Best Practices")," for integrating with external applications."))),(0,r.kt)("h2",{id:"authorization-flow"},"Authorization Flow"),(0,r.kt)("p",null,(0,r.kt)("div",{parentName:"p"})),(0,r.kt)("h2",{id:"messaging-flow"},"Messaging Flow"),(0,r.kt)("p",null,(0,r.kt)("div",{parentName:"p"})))}d.isMDXComponent=!0},8944:function(e,n,t){function a(e){var n,t,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(n=0;n<e.length;n++)e[n]&&(t=a(e[n]))&&(i&&(i+=" "),i+=t);else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function i(){for(var e,n,t=0,i="";t<arguments.length;)(e=arguments[t++])&&(n=a(e))&&(i&&(i+=" "),i+=n);return i}t.d(n,{Z:function(){return i}})}}]);